<!-- views/auth/register.ejs -->
<%
  const pageCss = ['auth'];
  const pageScripts = [];
%>

<%- include('../includes/head', { pageCss }) %>
<%- include('../includes/nav') %>

<main class="auth-page">
  <div class="container">
    <div class="auth-card wide-card">
      <h1>Registro</h1>
      
      <% if (typeof error !== 'undefined' && error) { %>
        <div class="alert alert-error">
          <%= error %>
        </div>
      <% } %>
      
      <form action="/auth/register" method="POST">
        <div class="form-row">
          <div class="form-group">
            <label for="firstName">Nombre</label>
            <input type="text" id="firstName" name="firstName" value="<%= typeof formData !== 'undefined' ? formData.firstName || '' : '' %>" required>
          </div>
          
          <div class="form-group">
            <label for="lastName">Apellido</label>
            <input type="text" id="lastName" name="lastName" value="<%= typeof formData !== 'undefined' ? formData.lastName || '' : '' %>" required>
          </div>
        </div>
        
        <div class="form-group">
          <label for="email">Correo Electrónico</label>
          <input type="email" id="email" name="email" value="<%= typeof formData !== 'undefined' ? formData.email || '' : '' %>" required>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="password">Contraseña</label>
            <input type="password" id="password" name="password" required>
          </div>
          
          <div class="form-group">
            <label for="confirmPassword">Confirmar Contraseña</label>
            <input type="password" id="confirmPassword" name="confirmPassword" required>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="birthday">Fecha de Nacimiento</label>
            <input type="date" id="birthday" name="birthday" value="<%= typeof formData !== 'undefined' ? formData.birthday || '' : '' %>" required>
          </div>
          
          <div class="form-group">
            <label for="gender">Género</label>
            <select id="gender" name="gender" required>
              <option value="">Seleccionar</option>
              <option value="male" <%= typeof formData !== 'undefined' && formData.gender === 'male' ? 'selected' : '' %>>Masculino</option>
              <option value="female" <%= typeof formData !== 'undefined' && formData.gender === 'female' ? 'selected' : '' %>>Femenino</option>
              <option value="prefer_not_to_say" <%= typeof formData !== 'undefined' && formData.gender === 'prefer_not_to_say' ? 'selected' : '' %>>Prefiero no decir</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="maritalStatus">Estado Civil</label>
            <select id="maritalStatus" name="maritalStatus" required>
              <option value="">Seleccionar</option>
              <option value="single" <%= typeof formData !== 'undefined' && formData.maritalStatus === 'single' ? 'selected' : '' %>>Soltero/a</option>
              <option value="married" <%= typeof formData !== 'undefined' && formData.maritalStatus === 'married' ? 'selected' : '' %>>Casado/a</option>
              <option value="divorced" <%= typeof formData !== 'undefined' && formData.maritalStatus === 'divorced' ? 'selected' : '' %>>Divorciado/a</option>
              <option value="widowed" <%= typeof formData !== 'undefined' && formData.maritalStatus === 'widowed' ? 'selected' : '' %>>Viudo/a</option>
            </select>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="church">Iglesia</label>
            <input type="text" id="church" name="church" value="<%= typeof formData !== 'undefined' ? formData.church || '' : '' %>" required>
          </div>
          
          <div class="form-group">
            <label for="isMember">¿Eres miembro?</label>
            <select id="isMember" name="isMember" required>
              <option value="">Seleccionar</option>
              <option value="yes" <%= typeof formData !== 'undefined' && formData.isMember === 'yes' ? 'selected' : '' %>>Sí</option>
              <option value="no" <%= typeof formData !== 'undefined' && formData.isMember === 'no' ? 'selected' : '' %>>No</option>
            </select>
          </div>
        </div>
        
        <div class="form-group">
          <label for="phone">Número de Teléfono</label>
          <input type="tel" id="phone" name="phone" value="<%= typeof formData !== 'undefined' ? formData.phone || '' : '' %>" required>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="emergencyName">Nombre de Contacto de Emergencia</label>
            <input type="text" id="emergencyName" name="emergencyName" value="<%= typeof formData !== 'undefined' ? formData.emergencyName || '' : '' %>" required>
          </div>
          
          <div class="form-group">
            <label for="emergencyPhone">Teléfono de Contacto de Emergencia</label>
            <input type="tel" id="emergencyPhone" name="emergencyPhone" value="<%= typeof formData !== 'undefined' ? formData.emergencyPhone || '' : '' %>" required>
          </div>
        </div>
        
        <div class="form-group">
          <label for="referral">¿Cómo supiste de nosotros? (Opcional)</label>
          <input type="text" id="referral" name="referral" value="<%= typeof formData !== 'undefined' ? formData.referral || '' : '' %>">
        </div>
        
        <div class="form-action">
          <button type="submit" class="btn btn-primary">Registrarse</button>
        </div>
        
        <div class="auth-links">
          <a href="/auth/login">¿Ya tienes una cuenta? Iniciar Sesión</a>
        </div>
      </form>
    </div>
  </div>
</main>

<%- include('../includes/footer', { pageScripts }) %>